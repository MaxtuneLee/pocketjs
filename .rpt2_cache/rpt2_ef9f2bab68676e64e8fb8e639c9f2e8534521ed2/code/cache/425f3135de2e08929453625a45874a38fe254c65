{"code":"/**\r\n * 在localStorage中存储数据\r\n * @param key 储存键\r\n * @param value 储存值\r\n * @param expire 过期时间\r\n */\r\nexport var setStorage = function (key, value, expire) {\r\n    if (expire === void 0) { expire = 0; }\r\n    if (value === '' || value === undefined) {\r\n        value = null;\r\n    }\r\n    expire = (expire ? expire : 0) * 1000;\r\n    var Data = {\r\n        value: value,\r\n        time: Date.now(),\r\n        expire: expire\r\n    };\r\n    localStorage.setItem(key, JSON.stringify(Data));\r\n};\r\n/**\r\n * 删除localStorage中的相应数据\r\n * @param key 需要删除的储存键\r\n */\r\nexport var removeStorage = function (key) {\r\n    localStorage.removeItem(key);\r\n};\r\n/**\r\n * 清空localStorage\r\n */\r\nexport var clearStorage = function () {\r\n    localStorage.clear();\r\n};\r\n/**\r\n * 获取localStorage中所需的数据\r\n * @param key 需要获取的储存键\r\n * @returns 返回该键对应的值\r\n */\r\nexport var getStorage = function (key) {\r\n    if (localStorage.getItem(key) === null || JSON.stringify(localStorage.getItem(key)) === 'null') {\r\n        return null;\r\n    }\r\n    var storage = JSON.parse(localStorage.getItem(key));\r\n    var now = Date.now();\r\n    if (storage.expire && storage.expire < (now - storage.time)) {\r\n        removeStorage(key);\r\n        return 'Storage expired';\r\n    }\r\n    else {\r\n        return storage.value;\r\n    }\r\n};\r\n/**\r\n * 获取localStorage中的所有数据\r\n * @returns 返回localStorage中的所有数据\r\n */\r\nexport var getAllStorage = function () {\r\n    var storageLength = localStorage.length;\r\n    var storageArr = [];\r\n    for (var i = 0; i < storageLength; i++) {\r\n        var key = localStorage.key(i);\r\n        var value = getStorage(key);\r\n        storageArr.push({\r\n            key: key,\r\n            value: value\r\n        });\r\n    }\r\n    return storageArr;\r\n};\r\n/**\r\n *\r\n * @param key 需要查询的储存键\r\n * @returns 如果储存键没过期，返回true，否则返回false\r\n */\r\nexport var isExpired = function (key) {\r\n    if (localStorage.getItem(key) === null || JSON.stringify(localStorage.getItem(key)) === 'null') {\r\n        return true;\r\n    }\r\n    var storage = JSON.parse(localStorage.getItem(key));\r\n    var now = Date.now();\r\n    if (storage.expire && storage.expire < (now - storage.time)) {\r\n        return true;\r\n    }\r\n    else {\r\n        return false;\r\n    }\r\n};\r\n","dts":{"name":"/workspaces/pocketjs/index.d.ts","writeByteOrderMark":false,"text":"/**\r\n * 在localStorage中存储数据\r\n * @param key 储存键\r\n * @param value 储存值\r\n * @param expire 过期时间\r\n */\r\nexport declare const setStorage: (key: string, value?: any, expire?: number) => void;\r\n/**\r\n * 删除localStorage中的相应数据\r\n * @param key 需要删除的储存键\r\n */\r\nexport declare const removeStorage: (key: string) => void;\r\n/**\r\n * 清空localStorage\r\n */\r\nexport declare const clearStorage: () => void;\r\n/**\r\n * 获取localStorage中所需的数据\r\n * @param key 需要获取的储存键\r\n * @returns 返回该键对应的值\r\n */\r\nexport declare const getStorage: (key: string) => any;\r\n/**\r\n * 获取localStorage中的所有数据\r\n * @returns 返回localStorage中的所有数据\r\n */\r\nexport declare const getAllStorage: () => any;\r\n/**\r\n *\r\n * @param key 需要查询的储存键\r\n * @returns 如果储存键没过期，返回true，否则返回false\r\n */\r\nexport declare const isExpired: (key: string) => boolean;\r\n"}}
