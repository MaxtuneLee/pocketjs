!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.pocketjs={})}(this,function(e){"use strict";var t=function(){for(var e=localStorage.length,t=Date.now(),r=0;r<e;r++){var a=localStorage.key(r),o=JSON.parse(localStorage.getItem(a));o.expireTime<t-o.time&&(o.isExpired=!0,localStorage.setItem(a,JSON.stringify(o)))}},r=function(e,r,a){void 0===a&&(a=0),t(),""!==r&&void 0!==r||(r=null),a=1e3*(a||0);var o=localStorage.length+1,l={id:o,value:r,time:Date.now(),expireTime:a,isExpired:!1};localStorage.setItem(e,JSON.stringify(l))},a=function(e,r,a){t(),""!==r&&void 0!==r||(r=null);var o=JSON.parse(localStorage.getItem(e));null!==a&&void 0!==a||(a=o.expireTime);var l={id:o.id,value:r,time:Date.now(),expireTime:a,isExpired:!1};localStorage.setItem(e,JSON.stringify(l))},o=function(e){t(),localStorage.removeItem(e)},l=function(){localStorage.clear()},i=function(e){if(t(),null===localStorage.getItem(e)||"null"===JSON.stringify(localStorage.getItem(e)))return null;var r=JSON.parse(localStorage.getItem(e)),a=Date.now();return r.expire<a-r.time?(o(e),"Storage expired"):r.value},n=function(e){if(t(),null===localStorage.getItem(e)||"null"===JSON.stringify(localStorage.getItem(e)))return!0;var r=JSON.parse(localStorage.getItem(e)),a=Date.now();return!!(r.expire&&r.expire<a-r.time)},g=function(e){if(t(),null===localStorage.getItem(e)||"null"===JSON.stringify(localStorage.getItem(e)))return"Data not found";var r=JSON.parse(localStorage.getItem(e));r.isExpired=!0,localStorage.setItem(e,JSON.stringify(r))},S=function(){for(var e=localStorage.length,t=0;t<e;t++){var r=localStorage.key(t);!0===JSON.parse(localStorage.getItem(r)).isExpired&&o(r)}},c=function(){t();for(var e=localStorage.length,r=[],a=0;a<e;a++){var o=localStorage.key(a),l=JSON.parse(localStorage.getItem(o));return!0!==l.isExpired&&r.push({key:o,value:l}),r}},u=function(){t();for(var e=localStorage.length,r=[],a=0;a<e;a++){var o=localStorage.key(a),l=JSON.parse(localStorage.getItem(o));return!0===l.isExpired&&r.push({key:o,value:l}),r}};e.addStorage=r,e.changeStorage=a,e.removeStorage=o,e.clearStorage=l,e.getStorage=i,e.isExpired=n,e.expireData=g,e.clearExpired=S,e.getAllStorage=c,e.getExpiredStorage=u,Object.defineProperty(e,"__esModule",{value:!0})});
